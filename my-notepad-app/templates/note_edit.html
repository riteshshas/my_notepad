{% extends "base.html" %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center">
    <h3>Edit Note</h3>
    <form method="post" action="{{ url_for('delete_note', note_id=note.id) }}" onsubmit="return confirm('Delete this note?')">
      <button class="btn btn-outline-danger">Delete</button>
    </form>
  </div>
  <form method="post">
    <div class="mb-3">
      <label class="form-label">Title</label>
      <input class="form-control" name="title" value="{{ note.title }}">
    </div>
    <div class="mb-3">
      <label class="form-label">Folder</label>
      <select class="form-select" name="folder_id">
        <option value="">(none)</option>
        {% for f in folders %}
          <option value="{{ f.id }}" {% if note.folder_id == f.id %}selected{% endif %}>{{ f.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Content</label>
      <textarea class="form-control" name="content">{{ note.content }}</textarea>
    </div>
    <div class="form-check form-switch mb-3">
      <input class="form-check-input" type="checkbox" id="is_public" name="is_public" {% if note.is_public %}checked{% endif %}>
      <label class="form-check-label" for="is_public">Public link</label>
      {% if note.is_public %}
        <div class="form-text">Public URL: <a target="_blank" href="{{ url_for('public_note', slug=note.slug) }}">{{ request.host_url[:-1] }}{{ url_for('public_note', slug=note.slug) }}</a></div>
      {% endif %}
    </div>
    <button class="btn btn-primary">Save</button>
  </form>
{% endblock %}
